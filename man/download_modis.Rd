% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download_modis.R
\name{download_modis}
\alias{download_modis}
\title{Download MODIS Data from NASA}
\usage{
download_modis(
  shapefile,
  start,
  end,
  product = "MOD13A3",
  band = "1 km monthly EVI",
  out_dir = ".",
  username = NULL,
  password = NULL,
  version = "061",
  scale_factor = "auto",
  keep_hdf = FALSE,
  overwrite = FALSE
)
}
\arguments{
\item{shapefile}{An \code{sf} object defining the area of interest.
Reprojected to WGS84 (EPSG:4326) for the NASA query.}

\item{start}{Character. Start date in any common format
(e.g. \code{"2023-01-01"}).}

\item{end}{Character. End date in any common format.}

\item{product}{Character. MODIS product short name (default
\code{"MOD13A3"} for monthly vegetation indices at 1 km).}

\item{band}{Character. HDF subdataset name to extract (default
\code{"1 km monthly EVI"}). Use \code{terra::describe(hdf_file)} on a
downloaded HDF to see available subdatasets.}

\item{out_dir}{Character. Output directory for GeoTIFFs
(default \code{"."}). Created if it does not exist.}

\item{username}{Character or \code{NULL}. NASA Earthdata username.
Falls back to \code{Sys.getenv("EARTHDATA_USERNAME")}.}

\item{password}{Character or \code{NULL}. NASA Earthdata password.
Falls back to \code{Sys.getenv("EARTHDATA_PASSWORD")}.}

\item{version}{Character. MODIS collection version (default
\code{"061"}).}

\item{scale_factor}{\code{"auto"}, numeric, or \code{NULL}. When \code{"auto"}
(default), the scale factor is looked up from a built-in table
of known MODIS bands (e.g. 0.0001 for EVI/NDVI, 0.02 for
LST). Pass a number to override, or \code{NULL} to skip scaling.}

\item{keep_hdf}{Logical. Keep raw HDF files after processing?
Default \code{FALSE} (deletes them). When \code{TRUE}, saved to
\verb{\{out_dir\}/hdf/}.}

\item{overwrite}{Logical. Re-download and reprocess existing
files? Default \code{FALSE}.}
}
\value{
Invisible character vector of output GeoTIFF paths.
}
\description{
Searches NASA's CMR catalog, downloads MODIS HDF files via
\code{httr2}, extracts the requested band, mosaics tiles, crops to
the area of interest, scales values, and saves one GeoTIFF per
time step. Output files are named \verb{modis_\{band\}_\{YYYY\}_\{MM\}.tif}
and work directly with \code{\link[=process_raster_collection]{process_raster_collection()}}.
}
\details{
Use \code{\link[=modis_options]{modis_options()}} to browse available products.
}
\examples{
\dontrun{
boundary <- sf::st_read("guinea_adm0.geojson")

# download monthly EVI for 2023
paths <- download_modis(
  shapefile = boundary,
  start     = "2023-01-01",
  end       = "2023-12-31",
  out_dir   = "data/evi",
  username  = "my_user",
  password  = "my_pass"
)

# then use the existing raster processing pipeline
result <- process_raster_collection(
  directory    = "data/evi",
  shapefile    = sf::st_read("guinea_adm3.geojson"),
  id_cols      = c("adm0", "adm1", "adm2", "adm3"),
  aggregations = "mean"
)

# download NDVI instead
download_modis(
  shapefile = boundary,
  start     = "2023-01-01",
  end       = "2023-12-31",
  band      = "1 km monthly NDVI",
  out_dir   = "data/ndvi"
)

# keep raw HDF files for inspection
download_modis(
  shapefile = boundary,
  start     = "2023-01-01",
  end       = "2023-12-31",
  out_dir   = "data/evi",
  keep_hdf  = TRUE
)
}
}
