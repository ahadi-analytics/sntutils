% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/facility_reporting_plot.R
\name{facility_reporting_plot}
\alias{facility_reporting_plot}
\title{Plot monthly reporting activity by health facility}
\usage{
facility_reporting_plot(
  data,
  hf_col,
  date_col = "date",
  key_indicators = c("test", "pres", "conf"),
  palette = "classic",
  target_language = "en",
  source_language = "en",
  lang_cache_path = base::tempdir(),
  plot_path = NULL,
  compress_image = FALSE,
  image_overwrite = TRUE,
  compression_speed = 1,
  compression_verbose = TRUE,
  plot_scale = 0.75,
  plot_width = 22,
  plot_height = 15,
  plot_dpi = 300,
  show_plot = TRUE,
  include_never_reported = FALSE
)
}
\arguments{
\item{data}{Data frame containing routine health facility records.}

\item{hf_col}{Character. Column storing health facility identifiers.}

\item{date_col}{Character. Column storing observation dates. Defaults to
"date".}

\item{key_indicators}{Character vector with columns defining reporting
activity. Defaults to \code{c("test", "pres", "conf")}.}

\item{palette}{Character. Colour palette for activity statuses. One of
\code{c("classic", "sunset", "forest", "coral", "violet", "slate", "citrus", "orchid")}. Defaults to "classic".}

\item{target_language}{Target language for labels (ISO 639-1). Defaults to
"en".}

\item{source_language}{Source language for labels. Defaults to "en".}

\item{lang_cache_path}{Path used to cache translations. Defaults to
\code{base::tempdir()}.}

\item{plot_path}{Path to directory for saving plot output. If NULL (default),
plot is not saved.}

\item{compress_image}{Logical. Compress PNG using \code{compress_png()} after
saving. Defaults to FALSE.}

\item{image_overwrite}{Logical. Overwrite an existing file when TRUE.
Defaults to TRUE.}

\item{compression_speed}{Integer (1-10) controlling compression effort.
Defaults to 1.}

\item{compression_verbose}{Logical. Emit compression progress when TRUE.
Defaults to TRUE.}

\item{plot_scale}{Numeric. Scaling factor for saved plots. Values > 1
increase size, < 1 decrease size. Default is 0.75.}

\item{plot_width}{Numeric. Width of saved plot in inches. Default is 20.}

\item{plot_height}{Numeric. Height of saved plot in inches. Default is 15.}

\item{plot_dpi}{Numeric. Resolution of saved plot in dots per inch.
Default is 300.}

\item{show_plot}{Logical. If FALSE, the plot is returned invisibly (not
displayed). Useful when only saving plots. Default is TRUE.}

\item{include_never_reported}{Logical. If TRUE, includes facilities that
have never reported in the plot. If FALSE (default), only shows
facilities that have reported at least once.}
}
\value{
A ggplot object visualising facility reporting activity.
}
\description{
Builds a balanced monthly panel, flags reporting on key indicators,
derives first reporting date and activity status, and returns a ggplot.
}
\examples{

toy_data <- tibble::tibble(
  hf_uid_new = rep(c("HF1", "HF2"), each = 4),
  date = rep(
    base::seq.Date(
      base::as.Date("2024-01-01"),
      by = "month",
      length.out = 4
    ),
    times = 2
  ),
  test = c(NA, 1, 2, NA, NA, NA, 3, 4),
  pres = c(0, 2, NA, 1, NA, 1, 2, 3),
  conf = c(0, NA, 1, 0, NA, NA, 1, 2)
)

facility_reporting_plot(
  data = toy_data,
  hf_col = "hf_uid_new"
)
}
