% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/reporting_rate.R
\name{reporting_rate_map}
\alias{reporting_rate_map}
\title{Plot reporting rate maps over time}
\usage{
reporting_rate_map(
  data,
  shapefile,
  x_var,
  adm_var,
  vars_of_interest,
  hf_col = NULL,
  use_reprate = TRUE,
  full_range = TRUE,
  weighting = FALSE,
  weight_var = NULL,
  weight_window = 12,
  exclude_current_x = TRUE,
  cold_start = "median_within_y",
  fill_palette = "Zissou1",
  facet_label = NULL,
  facet_ncol = 4,
  target_language = "en",
  source_language = "en",
  lang_cache_path = tempdir(),
  plot_path = NULL,
  compress_image = FALSE,
  image_overwrite = TRUE,
  compression_speed = 1,
  compression_verbose = TRUE,
  plot_scale = 1,
  plot_width = NULL,
  plot_height = NULL,
  plot_dpi = 300,
  show_plot = TRUE,
  ...
)
}
\arguments{
\item{data}{Data frame of health facility data.}

\item{shapefile}{sf object containing administrative boundaries (adm1 or adm2).}

\item{x_var}{Character. Time variable (e.g., "yearmon", "year", "month").}

\item{adm_var}{Character. Administrative variable in both \code{data} and \code{shapefile}
(e.g., "adm1" or "adm2").}

\item{vars_of_interest}{Character vector. Variable(s) to compute reporting rates for.
These will be displayed in the plot title and subtitle.}

\item{hf_col}{Character. Health facility ID column, if required. Default is NULL.}

\item{use_reprate}{Logical. If TRUE, plot reporting rate (facilities that reported);
if FALSE, plot missing rate (facilities that didn't report). Default is TRUE.}

\item{full_range}{Logical. If TRUE, the fill scale will use the full range from 0 to 100.
If FALSE, the fill scale will use the range of values present in the data. Default is TRUE.}

\item{weighting}{Logical. If TRUE, compute weighted reporting rates based on
facility size. Default is FALSE.}

\item{weight_var}{Character. Weight variable if weighting = TRUE.}

\item{weight_window}{Integer. Number of periods for typical size.
Default is 12.}

\item{exclude_current_x}{Logical. Exclude current period in weighting.
Default is TRUE.}

\item{cold_start}{Character. Cold-start strategy ("median_within_y" or "median_global").
Default is "median_within_y".}

\item{fill_palette}{Character. Not used - kept for backward compatibility.
Color palette is automatically selected based on use_reprate parameter
to match reporting_rate_plot() styling.}

\item{facet_label}{Character. Optional custom label for the administrative level
in the title. If NULL, uses adm_var value. Default is NULL.}

\item{facet_ncol}{Integer. Number of facet columns. Default is 4.}

\item{target_language}{Character. ISO 639-1 code for translation. Default "en".}

\item{source_language}{Character. Source language for translation. Default "en".}

\item{lang_cache_path}{Path to directory for storing translation cache.
Default is tempdir().}

\item{plot_path}{Character. Path to save the plot. Can be either a directory path
(filename will be auto-generated) or a full file path ending in .png.
If NULL, plot is not saved.}

\item{compress_image}{Logical. If TRUE, compress the saved plot.
Default is FALSE.}

\item{image_overwrite}{Logical. If TRUE, overwrite existing files.
Default is TRUE.}

\item{compression_speed}{Integer. Speed/quality trade-off from 1
(brute-force) to 10 (fastest). Default is 1.}

\item{compression_verbose}{Logical. Controls output verbosity.
FALSE = silent, TRUE = verbose. Default is TRUE.}

\item{plot_scale}{Numeric. Scaling factor for saved plots. Values > 1
increase size, < 1 decrease size. Default is 1.}

\item{plot_width}{Numeric. Width of saved plot in inches. If NULL,
width is calculated automatically based on data.}

\item{plot_height}{Numeric. Height of saved plot in inches. If NULL,
height is calculated automatically based on data.}

\item{plot_dpi}{Numeric. Resolution of saved plot in dots per inch.
Default is 300.}

\item{show_plot}{Logical. Display plot (TRUE) or return invisibly (FALSE).
Default is TRUE.}

\item{...}{Additional arguments passed to internal functions.}
}
\value{
A ggplot2 object.
}
\description{
Creates faceted maps of reporting rates (or missing rates) by administrative
unit and time. Designed to complement \code{reporting_rate_plot()} with consistent
styling and color schemes. The function displays the variables of interest in
both the title and subtitle for clarity.
}
\examples{
\dontrun{
# Example: adm1-level map over months
reporting_rate_map(
  data = hf_data,
  shapefile = adm1_sf,
  x_var = "month",
  adm_var = "district",
  vars_of_interest = "malaria"
)
}
}
