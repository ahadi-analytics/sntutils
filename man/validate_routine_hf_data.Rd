% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/validate_routine_hf_data.R
\name{validate_routine_hf_data}
\alias{validate_routine_hf_data}
\title{Orchestrates a suite of validation checks on routine HF data. It standardizes
column resolution, selects indicators, runs missing/duplicate/future/logic/
outlier checks, compiles a summary, and optionally translates and saves.}
\usage{
validate_routine_hf_data(
  data,
  id_col = "record_id",
  facility_col = "hf_uid",
  date_col = "date",
  yearmon_col = "yearmon",
  year_col = "year",
  month_col = "month",
  admin_cols = c("adm0", "adm1", "adm2", "adm3"),
  admin_guid_cols = c("adm0_guid", "adm1_guid", "adm2_guid", "adm3_guid"),
  core_id_cols = NULL,
  indicators = NULL,
  consistency_pairs = NULL,
  check_future_dates = TRUE,
  check_duplicates = TRUE,
  check_outliers = TRUE,
  check_facility_activeness = TRUE,
  hf_name_col = "hf",
  key_indicators = NULL,
  activeness_method = 3,
  nonreport_window = 6,
  reporting_rule = "any_non_na",
  min_reporting_rate = 0.5,
  outlier_methods = c("iqr", "median", "mean"),
  time_mode = "across_time",
  strictness = "balanced",
  sd_multiplier = 2,
  mad_constant = 1.4826,
  mad_multiplier = 6,
  iqr_multiplier = 1.5,
  min_n = 3,
  consensus_rule = 1,
  save_results = FALSE,
  output_path = NULL,
  output_name = "validation_of_hf_routine_data",
  output_formats = c("xlsx", "rds"),
  verbose = TRUE,
  target_language = "en",
  source_language = "en",
  lang_cache_path = base::tempdir()
)
}
\arguments{
\item{data}{data.frame. Routine facility dataset.}

\item{id_col}{character. Unique record id. Default "record_id".}

\item{facility_col}{character. Facility id. Default "hf_uid".}

\item{date_col}{character. Date column. Default "date".}

\item{yearmon_col}{character. Year-month col. Default "yearmon".}

\item{year_col}{character. Year col. Default "year".}

\item{month_col}{character. Month col. Default "month".}

\item{admin_cols}{character. Admin columns (adm0..adm3). Default
c("adm0","adm1","adm2","adm3").}

\item{admin_guid_cols}{character. Admin GUID columns. Default
c("adm0_guid","adm1_guid","adm2_guid","adm3_guid").}

\item{core_id_cols}{character|NULL. If NULL, uses the set above.}

\item{indicators}{character|NULL. Numeric indicators to validate. If NULL,
auto-detect from numeric columns after excluding core ids.}

\item{consistency_pairs}{list|NULL. Each element is list(input=, output=).
If NULL, defaults generated from common malaria cascade rules.}

\item{check_future_dates}{logical. Default TRUE.}

\item{check_duplicates}{logical. Default TRUE.}

\item{check_outliers}{logical. Default TRUE.}

\item{check_facility_activeness}{logical. Check facility activeness. Default TRUE.}

\item{hf_name_col}{character. Facility name column. Default "hf".}

\item{key_indicators}{character|NULL. Key indicators for activeness check.
If NULL, uses all indicators. Default NULL.}

\item{activeness_method}{character or numeric. Classification method for facility activity
status. Can be numeric (1, 2, 3) or character ("method1", "method2", "method3").
Defaults to 3. See \code{\link{classify_facility_activity}} for details.}

\item{nonreport_window}{integer. Minimum number of consecutive non-reporting
months to classify a facility as inactive in method 3. Defaults to 6.}

\item{reporting_rule}{character. Defines what counts as reporting for activeness:
"any_non_na" (default, counts NA as non-reporting, 0 counts as reported)
or "positive_only" (requires >0 value to count as reported).}

\item{min_reporting_rate}{numeric. Minimum reporting rate threshold. Default 0.5.}

\item{outlier_methods}{character. Any of c("iqr","median","mean").}

\item{time_mode}{character. Time mode for outlier detection: "across_time" or "within_year". Default "across_time".}

\item{strictness}{character. Outlier detection strictness: "balanced", "lenient", "strict", "advanced". Default "advanced".}

\item{sd_multiplier}{numeric. Standard deviation multiplier for outlier detection. Default 2.}

\item{mad_constant}{numeric. MAD constant for outlier detection. Default 1.4826.}

\item{mad_multiplier}{numeric. MAD multiplier for outlier detection. Default 6.}

\item{iqr_multiplier}{numeric. IQR multiplier for outlier detection. Default 1.5.}

\item{min_n}{numeric. Minimum sample size for outlier detection. Default 3.}

\item{consensus_rule}{numeric. Number of methods that must agree for consensus outlier flag. Default 1.}

\item{save_results}{logical. Save outputs. Default FALSE.}

\item{output_path}{character|NULL. Required if save_results.}

\item{output_name}{character. Base output name. Default
"validation_routine_data_results".}

\item{output_formats}{character. Any of c("xlsx","rds"). Default
c("xlsx","rds").}

\item{verbose}{logical. CLI messages. Default TRUE.}

\item{target_language}{character. ISO-639-1. Default "en".}

\item{source_language}{character. ISO-639-1. Default "en".}

\item{lang_cache_path}{character. Path for translation cache. Default
base::tempdir().}
}
\value{
invisible named list with elements:
Summary, Missing values, Duplicate records, Future dates,
Consistency failures, Consistency details, Outliers,
Facility activeness over time, Facility activeness summary
}
\description{
Orchestrates a suite of validation checks on routine HF data. It standardizes
column resolution, selects indicators, runs missing/duplicate/future/logic/
outlier checks, compiles a summary, and optionally translates and saves.
}
\examples{
\dontrun{
validate_routine_hf_data(
  data = dhis2_data,
  indicators = c("conf","test","susp","maltreat")
)
}
}
