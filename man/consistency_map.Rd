% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/consistency_check.R
\name{consistency_map}
\alias{consistency_map}
\title{Consistency violation map}
\usage{
consistency_map(
  data,
  shapefile,
  input_var,
  output_var,
  adm_var,
  x_var = NULL,
  facet_ncol = 4,
  language = "en",
  plot_path = NULL,
  compress_image = FALSE,
  image_overwrite = TRUE,
  compression_speed = 1,
  compression_verbose = TRUE,
  plot_scale = 1,
  plot_width = NULL,
  plot_height = NULL,
  plot_dpi = 300,
  show_plot = TRUE
)
}
\arguments{
\item{data}{Data frame containing the input and output variables.}

\item{shapefile}{sf object with administrative boundaries.}

\item{input_var}{Character. Upstream variable (e.g. "test").}

\item{output_var}{Character. Downstream variable (e.g. "conf").}

\item{adm_var}{Character. Administrative unit in both data and shapefile.}

\item{x_var}{Character. Optional time variable (e.g. "year", "yearmon").
When provided, the map is faceted by this variable.}

\item{facet_ncol}{Integer. Number of facet columns. Default is 4.}

\item{language}{Character. Language code: "en", "fr", or "pt". Default "en".}

\item{plot_path}{Character. Directory or full file path for saving output.
Default NULL.}

\item{compress_image}{Logical. Compress final PNG. Default FALSE.}

\item{image_overwrite}{Logical. Overwrite existing file. Default TRUE.}

\item{compression_speed}{Integer 1-10. Default 1.}

\item{compression_verbose}{Logical. Default TRUE.}

\item{plot_scale}{Numeric. Default 1.}

\item{plot_width}{Numeric. Default NULL.}

\item{plot_height}{Numeric. Default NULL.}

\item{plot_dpi}{Numeric. Default 300.}

\item{show_plot}{Logical. Print plot. Default TRUE.}
}
\value{
A ggplot2 object.
}
\description{
Creates a map showing the number of periods where a logical consistency
violation occurred. A violation is defined as rows where the output variable
exceeds the input variable (output > input). Results are aggregated at the
specified administrative level and optionally faceted by a time variable.
}
\details{
Designed to complement \code{consistency_check()}. This function summarises the
number of violating rows within each administrative unit and displays the
magnitude spatially. Only a single input-output pair is accepted per call.

Typical malaria cascade checks include:
\itemize{
\item test vs conf
\item susp vs test
\item conf vs treat
}
}
\examples{
\dontrun{
consistency_map(
  data = hf_data,
  shapefile = adm2_sf,
  input_var = "test",
  output_var = "conf",
  adm_var = "adm2",
  x_var = "year"
)
}

}
