% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download_process_nasapower.R
\name{download_process_nasapower}
\alias{download_process_nasapower}
\title{Download and process NASA POWER daily climate data}
\usage{
download_process_nasapower(
  adm_sf,
  admin_cols = c("adm0", "adm1", "adm2"),
  start_date = "2025-01-01",
  end_date = "2025-12-31",
  power_vars = c("PRECTOTCORR", "T2M_MAX", "T2M_MIN", "T2M", "TS", "TS_MAX", "TS_MIN",
    "RH2M"),
  n_sample_points = 10,
  point_crs = 6933,
  power_community = "ag",
  max_retries = 3,
  dict_language = "fr"
)
}
\arguments{
\item{adm_sf}{An sf object containing administrative polygons. Must include
columns specified in \code{admin_cols} and have a valid CRS.}

\item{admin_cols}{Character vector of administrative identifier columns,
ordered from highest to lowest level. The last column is treated as the
unit identifier. Default is \code{c("adm0", "adm1", "adm2")}.}

\item{start_date}{Start date in \code{"YYYY-MM-DD"} format.}

\item{end_date}{End date in \code{"YYYY-MM-DD"} format.}

\item{power_vars}{Character vector of NASA POWER variable codes to download.}

\item{n_sample_points}{Number of random points to sample per polygon.
Median is computed across points. Smaller polygons may yield fewer points.
Default is 10.}

\item{point_crs}{EPSG code used for point sampling.
Default is 6933 (World Cylindrical Equal Area).}

\item{power_community}{NASA POWER community parameter. Default is "ag"
(agroclimatology).}

\item{max_retries}{Maximum retry attempts per unit. Default is 3.}

\item{dict_language}{Language for data dictionaries. Default is "fr".}
}
\value{
A list with four elements:
\describe{
\item{daily}{Tibble of daily climate data with admin columns}
\item{monthly}{Tibble of monthly aggregated climate data}
\item{dict_daily}{Data dictionary for daily data}
\item{dict_monthly}{Data dictionary for monthly data}
}
}
\description{
Downloads daily climate variables from the NASA POWER API for representative
administrative units, processes them into daily and monthly datasets, and
generates data dictionaries for each output.
}
\details{
For each polygon, multiple random points are sampled and data is downloaded
for each point. The median across sample points is computed to produce a
single representative value per administrative unit. This approach reduces
sensitivity to within-polygon spatial variability.

Returned values correspond to NASA POWER grid-cell averages (approximately
0.5 degree resolution) and should be interpreted as regional conditions
rather than point measurements.

The function is robust to partial download failures. Administrative units
that fail to download after the specified number of retries are skipped with
a warning. Execution stops only if no units return data.
}
\examples{
\dontrun{
# load administrative boundaries
adm_sf <- sf::st_read("path/to/admin_boundaries.shp")

# download NASA POWER data for 2024
result <- download_process_nasapower(
  adm_sf = adm_sf,
  admin_cols = c("adm0", "adm1", "adm2"),
  start_date = "2024-01-01",
  end_date = "2024-12-31"
)

# access daily and monthly data
daily_data <- result$daily
monthly_data <- result$monthly
}

}
